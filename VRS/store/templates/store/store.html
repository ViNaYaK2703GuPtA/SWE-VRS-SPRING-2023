{% extends 'store/main.html' %}
{% load static %}

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

{% block content %}
<div class="row">
    {% for product in products %}
    <div class="col-lg-4">
        <img class="thumbnail" src="{{ product.imageURL }}">
        <div class="box-element product">
            <h6><strong>{{ product.name }}</strong></h6>
            <p style="color: #adb5bd;">{{ product.genre }}</p>
            
            {% if product.inlist %}
                <button type="button" class="btn btn-danger btn-circle btn-sm">-</button>
                <button data-product="{{ product.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart">Add to Cart</button>
            {% else %}
                <button data-product="{{ product.id }}" data-action="add" class="btn btn-outline-secondary add-btn update-cart">Add to Cart</button>
                <button type="button" class="btn btn-success btn-circle btn-sm">+</button>
            {% endif %}
            
            <a class="btn btn-outline-success" href="/view/{{ product.name }}">View</a>
            
            <h4 style="display: inline-block; float: right"><strong>â‚¹{{ product.price|floatformat:2 }}</strong></h4>
        </div>
    </div>
{% endfor %}

</div>

<script>
    document.querySelectorAll('.btn-success').forEach(button => {
        button.addEventListener('click', () => {
            // Find the "-" button in the same product div and show it
            const minusButton = button.parentNode.querySelector('.btn-danger');
            minusButton.classList.remove('d-none');
            
          
            // Hide the "+" button
            button.classList.add('d-none');
        });
    });
      
    document.querySelectorAll('.btn-danger').forEach(button => {
        button.addEventListener('click', () => {
            // Find the "+" button in the same product div and show it
            const plusButton = button.parentNode.querySelector('.btn-success');
            plusButton.classList.remove('d-none');
          
            // Hide the "-" button
            button.classList.add('d-none');
        });
    });
</script>

{% endblock content %}
